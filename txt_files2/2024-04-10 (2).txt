CS 214 / Network communication
==============================

what do we mean by network communication?
    - sending messages from one computer to another
    - more precisely: from a process on one computer to a process
        on a different computer


What is needed for network communication?
    protocol: what sorts of messages can we send?
        how are they expressed?
        when are they sent and by whom?
    
    addressing: how do we indicate the participants?



layers from the ground up:

how do I communicate between two computers?

one answer: connect a wire between them

two or more connected devices are called a "link"

to add more than two hosts, we can add special devices
    hub - in Ethernet, a device with a certain number of ports (e.g., 4)
        we run a wire from each host to a port on the hub
        the hub forwards any messages it receives to every other host
    
    -> in Ethernet, every message frame includes a destination address
        every Ethernet device has a unique address (MAC)
        when a device receives a message for a different MAC, it ignores
            the message
            
    because hubs simply forward frames, they are very simple
        -> fast and inexpensive
    but forwarding every frame to every participant uses a lot of
        network resources
    
    
    switch - similar to a hub, but it associates MACs with ports
        messages are only forwarded to the port associated with the
            destination
        
        because the switch has to examine messages and keep track of
            MACs, it is slower and more expensive than a hub

typically, a link involves devices controlled by a single organization
-> not especially secure
-> every device can talk to any other device
-> little privacy

Ethernet also describes
    how are messages sent?
        large messages are broken into smaller parts
        each part is made into a "frame"
        the frame also includes the destination address
    
    how is network time divided?
        in the event two devices try to send at the same time, both
        will wait a random amount of time and retransmit
        -> this works well in practice!




internetworking - communication between devices on different networks

idea: our link contains one or more devices called "routers" or
    "border routers"
    
    a router connects two networks
    
Internet Protocol (IP)
    hosts are identified by IP address
        in IPv4 - 32-bit integer
            commonly written in "dotted quad"
            e.g., 127.0.0.1
        
        in IPv6 - 128-bit integer
            commonly written as groups of four hex digits separated by
            colons

    messages are broken into "packets"
        each packet indicates its source and destination IP addresses
        packets are sent separately across the network
        routers receiving a packet will transmit it to a peer hopefully
            getting it closer to its destination
            
        IP is a "best effort" protocol
            packets may be lost
            packets may be received out of order

    each router has a routing table
        -> given an IP address, which outgoing port should this packet
            be sent to?

    to keep the routing table simple, addresses are grouped into "subnets"
    typically, addresses with a similar prefix are part of the same
        subnet, and so one entry in the table can handle all of them
    
    early internet used three "classes" of subnets
        class A uses 8-bit prefix
        class B uses 16-bit prefix
        class C uses 24-bit prefix
        
    modern IPv4 uses "classless" routing where subnet prefixes can be any
        length
        
        often indicated with a slash and a number
        208.13.128.0/9  - indicates a subnet with a 9-bit prefix

    routers have their own protocols to send updated routing information

